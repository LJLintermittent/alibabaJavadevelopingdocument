# 《阿里巴巴Java开发手册--部分重点摘录与分析》

## 第四章 安全规约

* 【强制】隶属于用户个人的页面或者功能必须进行权限控制校验

  ~~~wiki
  说明：防止没有做水平权限校验就可以随便访问，修改，删除被人的数据，比如查看他人的私信内容
  ~~~

* 【强制】用户铭感数据禁止直接展示，必须对展示数据进行脱敏

  ~~~wiki
  说明：个人手机号码显示为137****0969，隐藏中间四位，防止隐私泄露
  ~~~

* 【强制】用户输入的SQL参数严格使用参数绑定或者METADATA字段值进行限定，防止SQL注入，禁止字符串拼接SQL访问数据库

  ~~~wiki
  反例：某系统没有对危险字符# --进行转义，导致在更新数据库时，where后边的信息被注释掉，对全库进行了更新，从而造成大量系统签名被恶意修改
  ~~~

* 【强制】用户请求传入的任何参数必须做有效性验证

  ~~~wiki
  说明：忽略参数校验可能导致如下情况
  1)page size过大导致内存溢出
  2)恶意order by导致数据库慢查询
  3)缓存击穿
  4)SSRF
  5)任意重定向
  6)SQL注入，Shell注入和反序列化注入
  7)正则输入源串拒绝服务ReDos
  Java代码用正则来验证客户端的输入，有些正则写法验证普通用户输入没有问题，但是如果攻击人员使用特殊构造的字符串来验证则可能导致死循环
  ~~~

* 【强制】禁止向HTML页面输出未经安全过滤或未正确转义的用户数据

* 【强制】在提交表单，AJAX时须执行CSRF安全验证

  ~~~wiki
  说明：CSRF(Cross-Site Request Forgery)跨站请求伪造是一类常见的编程漏洞，对于存在CSRF漏洞的应用或网站，攻击者可以事先构造好URL，一旦用户访问，后台便可在其不知情的情况下对数据库中的用户参数进行相应的修改
  ~~~

  

